# This service is to demonstrate how to use Route53

### Steps to create
  1. Run command in Terminal "yarn sls create_domain --stage dev"
    This message will be shown in Terminal: Serverless: Custom domain homeapi.test-cloud.buysub.com was created. New domains may take up to 40 minutes to be initialized.
  2. Go to AWS/Route53/HostedZones, verify there are 2 record sets created, one for http://homeapi.mydomain.com, the other for https://homeapi.mydomain.com.
  3. Run command in Terminal "yarn sls deploy --stage dev"


### Steps to remove
  1. "yarn sls delete_domain --stage dev"
  2. "yarn sls remove --stage dev"


### Test links:
#### https://homeapi.mydomain.com/dev/hello

{"message": "Hello TriLuong21", "input": {"resource": "/hello", "path": "/dev/hello", "httpMethod": "GET", "headers": {"Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9", "accept-encoding": "gzip, deflate, br", "Accept-Language": "en-US,en;q=0.9,vi;q=0.8", "CloudFront-Forwarded-Proto": "https", "CloudFront-Is-Desktop-Viewer": "true", "CloudFront-Is-Mobile-Viewer": "false", "CloudFront-Is-SmartTV-Viewer": "false", "CloudFront-Is-Tablet-Viewer": "false", "CloudFront-Viewer-Country": "US", "Host": "homeapi.test-cloud.buysub.com", "sec-fetch-mode": "navigate", "sec-fetch-site": "none", "sec-fetch-user": "?1", "upgrade-insecure-requests": "1", "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.88 Safari/537.36", "Via": "2.0 03ed22e55f14c5e22303b8bea377a2cb.cloudfront.net (CloudFront)", "X-Amz-Cf-Id": "44k74ETMjQInX5QBxyUDWisVv9lNBWnGl0frpzwW7Ks53W0urL2nGA==", "X-Amzn-Trace-Id": "Root=1-5e18c45f-cfa758aaea7280b9c53a79d8", "X-Forwarded-For": "104.129.196.99, 70.132.57.160", "X-Forwarded-Port": "443", "X-Forwarded-Proto": "https"}, "multiValueHeaders": {"Accept": ["text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"], "accept-encoding": ["gzip, deflate, br"], "Accept-Language": ["en-US,en;q=0.9,vi;q=0.8"], "CloudFront-Forwarded-Proto": ["https"], "CloudFront-Is-Desktop-Viewer": ["true"], "CloudFront-Is-Mobile-Viewer": ["false"], "CloudFront-Is-SmartTV-Viewer": ["false"], "CloudFront-Is-Tablet-Viewer": ["false"], "CloudFront-Viewer-Country": ["US"], "Host": ["homeapi.test-cloud.buysub.com"], "sec-fetch-mode": ["navigate"], "sec-fetch-site": ["none"], "sec-fetch-user": ["?1"], "upgrade-insecure-requests": ["1"], "User-Agent": ["Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.88 Safari/537.36"], "Via": ["2.0 03ed22e55f14c5e22303b8bea377a2cb.cloudfront.net (CloudFront)"], "X-Amz-Cf-Id": ["44k74ETMjQInX5QBxyUDWisVv9lNBWnGl0frpzwW7Ks53W0urL2nGA=="], "X-Amzn-Trace-Id": ["Root=1-5e18c45f-cfa758aaea7280b9c53a79d8"], "X-Forwarded-For": ["104.129.196.99, 70.132.57.160"], "X-Forwarded-Port": ["443"], "X-Forwarded-Proto": ["https"]}, "queryStringParameters": null, "multiValueQueryStringParameters": null, "pathParameters": null, "stageVariables": null, "requestContext": {"resourceId": "wvkbw2", "resourcePath": "/hello", "httpMethod": "GET", "extendedRequestId": "GGOe8EqhIAMFirA=", "requestTime": "10/Jan/2020:18:37:19 +0000", "path": "/dev/hello", "accountId": "590449824367", "protocol": "HTTP/1.1", "stage": "dev", "domainPrefix": "homeapi", "requestTimeEpoch": 1578681439560, "requestId": "33776aeb-1602-41cc-88dc-d26ab74d7691", "identity": {"cognitoIdentityPoolId": null, "accountId": null, "cognitoIdentityId": null, "caller": null, "sourceIp": "104.129.196.99", "principalOrgId": null, "accessKey": null, "cognitoAuthenticationType": null, "cognitoAuthenticationProvider": null, "userArn": null, "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.88 Safari/537.36", "user": null}, "domainName": "homeapi.test-cloud.buysub.com", "apiId": "9clnu0dnh9"}, "body": null, "isBase64Encoded": false}}


#### https://homeapi.mydomain.com/dev/greetings
{"message": "Greetings TriLuong21", "input": {"resource": "/greetings", "path": "/dev/greetings", "httpMethod": "GET", "headers": {"Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9", "Accept-Encoding": "gzip, deflate, br", "Accept-Language": "en-US,en;q=0.9,vi;q=0.8", "CloudFront-Forwarded-Proto": "https", "CloudFront-Is-Desktop-Viewer": "true", "CloudFront-Is-Mobile-Viewer": "false", "CloudFront-Is-SmartTV-Viewer": "false", "CloudFront-Is-Tablet-Viewer": "false", "CloudFront-Viewer-Country": "US", "Host": "homeapi.test-cloud.buysub.com", "sec-fetch-mode": "navigate", "sec-fetch-site": "none", "sec-fetch-user": "?1", "upgrade-insecure-requests": "1", "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.88 Safari/537.36", "Via": "2.0 03ed22e55f14c5e22303b8bea377a2cb.cloudfront.net (CloudFront)", "X-Amz-Cf-Id": "2YO9l-wRAuOQtLLYm0Fv7Yvyw2ggTJ7Ids7IfxHyBzAA5ZY4fqBQcQ==", "X-Amzn-Trace-Id": "Root=1-5e18c492-cdb7e282e2acef3df6d9d9ad", "X-Forwarded-For": "104.129.196.99, 70.132.57.152", "X-Forwarded-Port": "443", "X-Forwarded-Proto": "https"}, "multiValueHeaders": {"Accept": ["text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"], "Accept-Encoding": ["gzip, deflate, br"], "Accept-Language": ["en-US,en;q=0.9,vi;q=0.8"], "CloudFront-Forwarded-Proto": ["https"], "CloudFront-Is-Desktop-Viewer": ["true"], "CloudFront-Is-Mobile-Viewer": ["false"], "CloudFront-Is-SmartTV-Viewer": ["false"], "CloudFront-Is-Tablet-Viewer": ["false"], "CloudFront-Viewer-Country": ["US"], "Host": ["homeapi.test-cloud.buysub.com"], "sec-fetch-mode": ["navigate"], "sec-fetch-site": ["none"], "sec-fetch-user": ["?1"], "upgrade-insecure-requests": ["1"], "User-Agent": ["Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.88 Safari/537.36"], "Via": ["2.0 03ed22e55f14c5e22303b8bea377a2cb.cloudfront.net (CloudFront)"], "X-Amz-Cf-Id": ["2YO9l-wRAuOQtLLYm0Fv7Yvyw2ggTJ7Ids7IfxHyBzAA5ZY4fqBQcQ=="], "X-Amzn-Trace-Id": ["Root=1-5e18c492-cdb7e282e2acef3df6d9d9ad"], "X-Forwarded-For": ["104.129.196.99, 70.132.57.152"], "X-Forwarded-Port": ["443"], "X-Forwarded-Proto": ["https"]}, "queryStringParameters": null, "multiValueQueryStringParameters": null, "pathParameters": null, "stageVariables": null, "requestContext": {"resourceId": "tk6sj0", "resourcePath": "/greetings", "httpMethod": "GET", "extendedRequestId": "GGOm2G3joAMFjkw=", "requestTime": "10/Jan/2020:18:38:10 +0000", "path": "/dev/greetings", "accountId": "590449824367", "protocol": "HTTP/1.1", "stage": "dev", "domainPrefix": "homeapi", "requestTimeEpoch": 1578681490160, "requestId": "1533aef5-9211-4e38-b5d3-9766d4f8a7b4", "identity": {"cognitoIdentityPoolId": null, "accountId": null, "cognitoIdentityId": null, "caller": null, "sourceIp": "104.129.196.99", "principalOrgId": null, "accessKey": null, "cognitoAuthenticationType": null, "cognitoAuthenticationProvider": null, "userArn": null, "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.88 Safari/537.36", "user": null}, "domainName": "homeapi.test-cloud.buysub.com", "apiId": "9clnu0dnh9"}, "body": null, "isBase64Encoded": false}}